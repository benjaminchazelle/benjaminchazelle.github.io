<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        Tell me Lyon - Explainer notebook - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/github-gist.min.css" integrity="sha256-tAflq+ymku3Khs+I/WcAneIlafYgDiOQ9stIHH985Wo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/emojify.js/1.1.0/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
	p {
		text-align: justify;
	}
        @import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400italic,600,600italic,300italic,300|Source+Serif+Pro|Source+Code+Pro:400,300,500&subset=latin,latin-ext);.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\A0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.markdown-body kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram{text-align:center;background-color:inherit;border-radius:0;white-space:inherit}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p,.markdown-body .alert>ul{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.MJX_Assistive_MathML{display:none}.ui-infobar{position:relative;z-index:2;max-width:758px;margin-top:25px;margin-bottom:-25px;color:#777}.ui-toc{position:fixed;bottom:20px;z-index:10000}.ui-toc-label{opacity:.3;background-color:#ccc;border:none;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:23px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child > ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,Hiragino Kaku Gothic Pro,\\30D2\30E9\30AE\30CE\89D2\30B4 Pro W3,Osaka,Meiryo,\\30E1\30A4\30EA\30AA,MS Gothic,"\FF2D\FF33   \30B4\30B7\30C3\30AF",sans-serif}.ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,"\FF2D\FF33   \FF30\30B4\30B7\30C3\30AF",sans-serif}.markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,PingFang TC,Microsoft JhengHei,\\5FAE\8EDF\6B63\9ED1,sans-serif}.ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,\\5FAE\8EDF\6B63\9ED1UI,sans-serif}.markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Microsoft YaHei,\\5FAE\8F6F\96C5\9ED1,sans-serif}.ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,\\5FAE\8F6F\96C5\9ED1UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:3px;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:contain}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.unselectable{-moz-user-select:none;-webkit-user-select:none;-o-user-select:none;user-select:none}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;font-family:Source Sans Pro,Helvetica,Arial,sans-serif;letter-spacing:.025em}.focus,:focus{outline:none!important}::-moz-focus-inner{border:0!important}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid" style="position: relative;"><h1 id="Tell-me-Lyon---Explainer-notebook" style=""><a class="anchor hidden-xs" href="#Tell-me-Lyon---Explainer-notebook" title="Tell-me-Lyon---Explainer-notebook"><span class="octicon octicon-link"></span></a>Tell me Lyon - Explainer notebook</h1><p>Link to the vizualisation : <a href="https://benjaminchazelle.github.io/" target="_blank">https://benjaminchazelle.github.io/</a></p><p>Link to the GitHub repository: <a href="https://github.com/benjaminchazelle/benjaminchazelle.github.io" target="_blank">https://github.com/benjaminchazelle/benjaminchazelle.github.io</a></p><p>This notebook is the result of the final project assignement in the course 02806 : <em>Social Data Analysis and Visualization</em>.  We have built a narrative visualization of the city of Lyon, in France.</p><h2 id="1-Motivation" style=""><a class="anchor hidden-xs" href="#1-Motivation" title="1-Motivation"><span class="octicon octicon-link"></span></a>1.    Motivation</h2><p>We are a team of three French students, and therefore, we have chosen to present you the city of Lyon, in France, which is often, in fact pretty much always, overlooked by the French most popular attraction, Paris.<br>
Just for starters, it’s rich in Roman history but there’s actually a whole lot more going for this city than you might have thought. Lyon has around 510,000 people in the city, making it the third most populated city in France. It is big enough to keep things interesting, but small enough so that it’s easy to stay in touch with new found friends.</p><p>The Eiffel Tower? The Louvre? The River Seine? Sure, Paris is a beautiful city, but it’s a cliché. Our objective is to leave you with some stunning examples of what’s on offer in Lyon and to help you organize your trip to come and visit Lyon. You will be guided for your choice of accommodation and transportation depending on what you want to see.</p><p>Our initial dataset can be downloaded here: <a href="https://data.grandlyon.com/culture/point-dintfrft-touristique-mftropole-de-lyon/" target="_blank">https://data.grandlyon.com/culture/point-dintfrft-touristique-mftropole-de-lyon/</a>. It is made of many different data that can interest tourists in Lyon: accommodations, cultural places or monuments, shops, restaurants etc. We chose this one because it is rich and the most important thing is that it has geographic data, so that we can create a map. It will be explained in the following sections but this dataset is not the only one we used, even though it is the foundation of our project.</p><p>Here is the video of the first part of our project which explains the central idea that we have investigated in our final project: <a href="https://www.youtube.com/watch?v=MhXFzofHI5M" target="_blank">https://www.youtube.com/watch?v=MhXFzofHI5M</a></p><h2 id="2-Basic-stats" style=""><a class="anchor hidden-xs" href="#2-Basic-stats" title="2-Basic-stats"><span class="octicon octicon-link"></span></a>2.    Basic stats</h2><p>The data set has 5127 rows and a lot of interesting features that can be put to good use.</p><p>Some of the most interesting features are the data coordinates, which enable us to locate each place to a point on the map, the data types which help us categorizing them into restaurants, private accommodations, hotels, hostels, parks, cathedrals, etc. Here is an overview of the different <em>French</em> features that we have:</p><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> pandas.io.json <span class="hljs-keyword">import</span> json_normalize
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
</code></pre><pre><code class="python hljs">data_tourism = json.load(open(<span class="hljs-string">'tourismdata.json'</span>,encoding=<span class="hljs-string">'utf8'</span>))
data_tourism = pd.DataFrame(json_normalize(data_tourism[<span class="hljs-string">'features'</span>]))
data_tourism.columns
</code></pre><pre><code>Index(['geometry.coordinates', 'geometry.type', 'properties.adresse',
       'properties.classement', 'properties.codepostal', 'properties.commune',
       'properties.date_creation', 'properties.email', 'properties.facebook',
       'properties.fax', 'properties.gid', 'properties.id',
       'properties.id_sitra1', 'properties.last_update',
       'properties.last_update_fme', 'properties.nom', 'properties.ouverture',
       'properties.producteur', 'properties.siteweb',
       'properties.tarifsenclair', 'properties.tarifsmax',
       'properties.tarifsmin', 'properties.telephone',
       'properties.telephonefax', 'properties.type', 'properties.type_detail',
       'type'],
      dtype='object')
</code></pre><p>and some observation examples of the most interesting attributes:</p><pre><code class="python hljs">data_tourism[[<span class="hljs-string">'geometry.coordinates'</span>,<span class="hljs-string">'properties.adresse'</span>,<span class="hljs-string">'properties.classement'</span>,<span class="hljs-string">'properties.id'</span>,<span class="hljs-string">'properties.nom'</span>,<span class="hljs-string">'properties.siteweb'</span>, <span class="hljs-string">'properties.telephone'</span>, <span class="hljs-string">'properties.type'</span>, <span class="hljs-string">'properties.type_detail'</span>]].head()

</code></pre><div>
<style>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre class="part" data-startline="79" data-endline="85"><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table class="dataframe" border="1">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geometry.coordinates</th>
      <th>properties.adresse</th>
      <th>properties.classement</th>
      <th>properties.id</th>
      <th>properties.nom</th>
      <th>properties.siteweb</th>
      <th>properties.telephone</th>
      <th>properties.type</th>
      <th>properties.type_detail</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>[4.898995, 45.703226]</td>
      <td></td>
      <td>3 étoiles</td>
      <td>207259</td>
      <td>Théâtre des Célestins</td>
      <td></td>
      <td>0478298247</td>
      <td>HEBERGEMENT_LOCATIF</td>
      <td></td>
    </tr>
    <tr>
      <th>1</th>
      <td>[4.834113, 45.765248]</td>
      <td>68 rue Pierre Corneille</td>
      <td></td>
      <td>4755951</td>
      <td>Cinéma Lumière Fourmi</td>
      <td>http://www.cinemas-lumiere.com</td>
      <td>0478053840</td>
      <td>EQUIPEMENT</td>
      <td>Divertissement;Cinéma</td>
    </tr>
    <tr>
      <th>2</th>
      <td>[4.834435, 45.763234]</td>
      <td>1 place Francisque Régaud</td>
      <td></td>
      <td>205813</td>
      <td>Le Grand Café des Négociants</td>
      <td>http://www.lesnegociants.com</td>
      <td>0478425005</td>
      <td>RESTAURATION</td>
      <td>Brasserie</td>
    </tr>
    <tr>
      <th>3</th>
      <td>[4.869025, 45.74568]</td>
      <td>Musée Lumière, 25 rue du 1er Film</td>
      <td></td>
      <td>123723</td>
      <td>Bibliothèque Raymond Chirat</td>
      <td>http://www.institut-lumiere.org</td>
      <td>0478781895</td>
      <td>EQUIPEMENT</td>
      <td>Loisirs culturels;Bibliothèque - Médiathèque</td>
    </tr>
    <tr>
      <th>4</th>
      <td>[4.823302, 45.758917]</td>
      <td>8 rue Professeur Pierre Marion</td>
      <td>5 étoiles</td>
      <td>4681580</td>
      <td>Villa Maïa</td>
      <td>http://www.villa-maia.com</td>
      <td>0478160101</td>
      <td>HOTELLERIE</td>
      <td></td>
    </tr>
  </tbody>
</table>
</div><p>We made a selection among all the rows of the dataset and we only kept the cultural or natural places, as well as the accommodations. We then split them in two separate datasets: one for touristic places and one for the hotels. But the processing methods were quite similar for both of them.</p><h3 id="About-accommodations-in-Lyon" style=""><a class="anchor hidden-xs" href="#About-accommodations-in-Lyon" title="About-accommodations-in-Lyon"><span class="octicon octicon-link"></span></a>About accommodations in Lyon</h3><p>Below is presented the preprocessing steps for the hotel data.</p><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> pandas.io.json <span class="hljs-keyword">import</span> json_normalize
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

data = json.load(open(<span class="hljs-string">'tourismdata.json'</span>,encoding=<span class="hljs-string">'utf-8'</span>))

data = pd.DataFrame(json_normalize(data[<span class="hljs-string">'features'</span>]))

<span class="hljs-comment">## selection of the accommodation types</span>
acc = data[data[<span class="hljs-string">'properties.type'</span>]\
                  .isin([<span class="hljs-string">'HEBERGEMENT_COLLECTIF'</span>,<span class="hljs-string">'HEBERGEMENT_LOCATIF'</span>,<span class="hljs-string">'HOTELLERIE'</span>])]

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">number_stars</span><span class="hljs-params">(hotel)</span>:</span>
    row = hotel[<span class="hljs-string">'properties.classement'</span>]
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>):
        <span class="hljs-keyword">if</span> str(i+<span class="hljs-number">1</span>) <span class="hljs-keyword">in</span> row:
            <span class="hljs-keyword">return</span>(i+<span class="hljs-number">1</span>)
    <span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">telephone</span><span class="hljs-params">(hotel)</span>:</span>
    numbers = hotel[<span class="hljs-string">'properties.telephone'</span>]
    k = numbers.find(<span class="hljs-string">';'</span>)
    <span class="hljs-keyword">if</span> k == <span class="hljs-number">-1</span>:
        <span class="hljs-keyword">return</span> numbers
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> numbers[:k]

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">category</span><span class="hljs-params">(hotel)</span>:</span>
    cat = hotel[<span class="hljs-string">'properties.type'</span>]
    <span class="hljs-keyword">if</span> cat == <span class="hljs-string">'HEBERGEMENT_COLLECTIF'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'Hostel'</span>
    <span class="hljs-keyword">elif</span> cat == <span class="hljs-string">'HEBERGEMENT_LOCATIF'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'Private accomodation'</span>
    <span class="hljs-keyword">elif</span> cat == <span class="hljs-string">'HOTELLERIE'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'Hotel'</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>

acc[<span class="hljs-string">'properties.star'</span>] = acc.apply(number_stars, axis=<span class="hljs-number">1</span>)
acc[<span class="hljs-string">'properties.clean_telephone'</span>] = acc.apply(telephone, axis=<span class="hljs-number">1</span>)
acc[<span class="hljs-string">'properties.eng_type'</span>] = acc.apply(category, axis=<span class="hljs-number">1</span>)
acc2 = acc[[<span class="hljs-string">'geometry.coordinates'</span>, <span class="hljs-string">'properties.nom'</span>, <span class="hljs-string">'properties.star'</span>, <span class="hljs-string">'properties.clean_telephone'</span>,
           <span class="hljs-string">'properties.eng_type'</span>]]

H = acc.to_dict(orient=<span class="hljs-string">'index'</span>)
H1 = list(H.values())

<span class="hljs-comment">#with open('hotels_with_photo.json', 'w') as outfile:  </span>
<span class="hljs-comment">#            json.dump(H1, outfile)</span>
acc2.head()
</code></pre><pre><code>C:\Users\user\Anaconda2\envs\py35\lib\site-packages\ipykernel_launcher.py:39: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
C:\Users\user\Anaconda2\envs\py35\lib\site-packages\ipykernel_launcher.py:40: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
C:\Users\user\Anaconda2\envs\py35\lib\site-packages\ipykernel_launcher.py:41: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
</code></pre><div>
<style>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre class="part" data-startline="257" data-endline="263"><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table class="dataframe" border="1">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geometry.coordinates</th>
      <th>properties.nom</th>
      <th>properties.star</th>
      <th>properties.clean_telephone</th>
      <th>properties.eng_type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>[4.898995, 45.703226]</td>
      <td>Théâtre des Célestins</td>
      <td>3</td>
      <td>0478298247</td>
      <td>Private accomodation</td>
    </tr>
    <tr>
      <th>4</th>
      <td>[4.823302, 45.758917]</td>
      <td>Villa Maïa</td>
      <td>5</td>
      <td>0478160101</td>
      <td>Hotel</td>
    </tr>
    <tr>
      <th>8</th>
      <td>[4.861741, 45.760433]</td>
      <td>Ibis Budget Lyon Part-Dieu</td>
      <td>2</td>
      <td>0472682530</td>
      <td>Hotel</td>
    </tr>
    <tr>
      <th>12</th>
      <td>[4.863167, 45.770576]</td>
      <td>Loc Dalhias</td>
      <td>0</td>
      <td>0478041835</td>
      <td>Private accomodation</td>
    </tr>
    <tr>
      <th>16</th>
      <td>[4.828288, 45.76439]</td>
      <td>Duplex du change</td>
      <td>3</td>
      <td>0664287134</td>
      <td>Private accomodation</td>
    </tr>
  </tbody>
</table>
</div><p>The next steps were to find some pictures and the rating of each accommodation. For this we used the Google Maps API Places and sent requests with the name and position of all the places.</p><h3 id="About-hotspots" style=""><a class="anchor hidden-xs" href="#About-hotspots" title="About-hotspots"><span class="octicon octicon-link"></span></a>About hotspots</h3><p>The preprocessing of the hotspot dataset is very similar to the one that has just been presented.</p><p>The only difference is that we wanted to have a criterion to rank the places according to their popularity.<br>
In order to get this, we used an open-source program called <em>populartimes</em> to extract the number of reviews each place got on Google Maps. We used this number as a metric for the popularity of the places.</p><pre><code class="python hljs">data_hotspot = json.load(open(<span class="hljs-string">'hotspots_final.json'</span>,encoding=<span class="hljs-string">'utf8'</span>))
data_hotspot = pd.DataFrame(data_hotspot)
data_hotspot.head()
</code></pre><div>
<style>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre class="part" data-startline="349" data-endline="355"><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table class="dataframe" border="1">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geometry.coordinates_x</th>
      <th>properties.free</th>
      <th>properties.nb5</th>
      <th>properties.nb_reviews</th>
      <th>properties.nom_x</th>
      <th>properties.photo</th>
      <th>properties.photos</th>
      <th>properties.place_id</th>
      <th>properties.rating</th>
      <th>properties.reference</th>
      <th>properties.reviews</th>
      <th>properties.siteweb_x</th>
      <th>properties.variety</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>[4.823473, 45.76263]</td>
      <td></td>
      <td>3</td>
      <td>14</td>
      <td>Jardin du Rosaire dans le Parc des Hauteurs</td>
      <td>CmRaAAAALQmB81dL1HiW9_8-q1A8FB0YKLsTz3ICtk_d3f...</td>
      <td>[CmRaAAAALQmB81dL1HiW9_8-q1A8FB0YKLsTz3ICtk_d3...</td>
      <td>ChIJw-GySKnr9EcRfSIko-dbnPM</td>
      <td>4.4</td>
      <td>CmRSAAAA3hcqK5sFexx-VhvjKUuBPjSaPLGZ4zcIDM8Hv3...</td>
      <td>[5, 5, 5, 4, 4]</td>
      <td></td>
      <td>Park</td>
    </tr>
    <tr>
      <th>1</th>
      <td>[4.827601, 45.760562]</td>
      <td></td>
      <td>1</td>
      <td>131</td>
      <td>L'Horloge Astronomique</td>
      <td>CmRaAAAAUBwFJxO7harYmRH33b04qMETWV4E_Mf7hSWUzO...</td>
      <td>[CmRaAAAAUBwFJxO7harYmRH33b04qMETWV4E_Mf7hSWUz...</td>
      <td>ChIJIZwn_Ivq9EcRVTOVoORU99s</td>
      <td>3.5</td>
      <td>CmRSAAAAfbOvXdBmK7-eQB7YXXb-OP26pSiYWYxpMRVc-k...</td>
      <td>[4, 4, 5, 3, 1]</td>
      <td>http://cathedrale-lyon.cef.fr</td>
      <td>Other</td>
    </tr>
    <tr>
      <th>2</th>
      <td>[4.822097, 45.734224]</td>
      <td></td>
      <td>2</td>
      <td>126</td>
      <td>Parc des Berges du Rhône</td>
      <td>CmRaAAAAYLKkKsQkD8gdjG5yO3oEMNytOZL2GmkPr99UH1...</td>
      <td>[CmRaAAAAYLKkKsQkD8gdjG5yO3oEMNytOZL2GmkPr99UH...</td>
      <td>ChIJ27d-kdLr9EcR84gALAV1zEY</td>
      <td>4.1</td>
      <td>CmRRAAAAptyaN4KWvEoQ6nRn9id0c2J3FT7QujLDYQYyNv...</td>
      <td>[4, 5, 5, 4, 4]</td>
      <td>http://www.mairie7.lyon.fr/vdl/sections/fr/arr...</td>
      <td>Park</td>
    </tr>
    <tr>
      <th>3</th>
      <td>[5.005882, 45.76637]</td>
      <td></td>
      <td>1</td>
      <td>29</td>
      <td>Parc République</td>
      <td>CmRaAAAAQ0Klu1Dndgeinu75F3J9_QDVuouVy59cMHmfUs...</td>
      <td>[CmRaAAAAQ0Klu1Dndgeinu75F3J9_QDVuouVy59cMHmfU...</td>
      <td>ChIJX1i45KXH9EcRO3zbCVeqm2g</td>
      <td>4.1</td>
      <td>CmRRAAAAu9j9ydCOqT2P_f2IphL54qrEQG2MA3-F0qoYOD...</td>
      <td>[4, 4, 4, 4, 5]</td>
      <td>http://www.meyzieu.fr</td>
      <td>Park</td>
    </tr>
    <tr>
      <th>4</th>
      <td>[4.720173, 45.805924]</td>
      <td></td>
      <td>4</td>
      <td>88</td>
      <td>Parc de l'Hippodrome</td>
      <td>CmRaAAAAtVymwWx5wLHJtz0tMj63xhaVuzcdnP1aEE7Dap...</td>
      <td>[CmRaAAAAtVymwWx5wLHJtz0tMj63xhaVuzcdnP1aEE7Da...</td>
      <td>ChIJhRiiE0zt9EcRN-XljxEK2JY</td>
      <td>4.2</td>
      <td>CmRSAAAA7gRH-Kc6YwGTH6WbDCK3NOZi1zZuz1pDSfqrk2...</td>
      <td>[5, 5, 5, 3, 5]</td>
      <td>http://www.salvagny.org</td>
      <td>Park</td>
    </tr>
  </tbody>
</table>
</div><h3 id="About-metros-in-Lyon" style=""><a class="anchor hidden-xs" href="#About-metros-in-Lyon" title="About-metros-in-Lyon"><span class="octicon octicon-link"></span></a>About metros in Lyon</h3><p>We downloaded another dataset for this part, which came from the same website as before. It can be found here:<a href="https://data.grandlyon.com/equipements/entrfefsortie-des-stations-de-mftro-du-rfseau-tcl/" target="_blank">https://data.grandlyon.com/equipements/entrfefsortie-des-stations-de-mftro-du-rfseau-tcl/</a>. It has 160 rows, each one of them corresponding to a metro entrance in the city - hence there are several rows per station. The data is available in a geojson format, so it was quite straightforward to integrate it in the project structure.</p><pre><code class="python hljs">data_metro0 = json.load(open(<span class="hljs-string">'metrodata.json'</span>,encoding=<span class="hljs-string">'utf8'</span>))
data_metro0 = pd.DataFrame(json_normalize(data_metro0[<span class="hljs-string">'features'</span>]))
data_metro0.columns
</code></pre><pre><code>Index(['geometry.coordinates', 'geometry.type', 'properties.desserte',
       'properties.gid', 'properties.id', 'properties.id_station',
       'properties.last_update', 'properties.last_update_fme',
       'properties.nom', 'type'],
      dtype='object')
</code></pre><p>The detail about the lines of metro passing at each station was not part of the initial dataset and was added manually, and the irrelevant columns were taken out of the dataset.</p><pre><code class="python hljs">data_metro = json.load(open(<span class="hljs-string">'metro.json'</span>,encoding=<span class="hljs-string">'utf8'</span>))
data_metro = pd.DataFrame(data_metro)
data_metro.head()
</code></pre><div>
<style>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre class="part" data-startline="503" data-endline="509"><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table class="dataframe" border="1">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geometry.coordinates</th>
      <th>properties.lignes</th>
      <th>properties.nom</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>[4.84759563537, 45.7595036164]</td>
      <td>[B]</td>
      <td>Place Guichard</td>
    </tr>
    <tr>
      <th>1</th>
      <td>[4.84712980621, 45.7593644344]</td>
      <td>[B]</td>
      <td>Place Guichard</td>
    </tr>
    <tr>
      <th>2</th>
      <td>[4.84773933033, 45.7594174111]</td>
      <td>[B]</td>
      <td>Place Guichard</td>
    </tr>
    <tr>
      <th>3</th>
      <td>[4.84763568316, 45.7590652618]</td>
      <td>[B]</td>
      <td>Place Guichard</td>
    </tr>
    <tr>
      <th>4</th>
      <td>[4.84701961424, 45.7537367341]</td>
      <td>[B,D]</td>
      <td>Saxe-gambetta</td>
    </tr>
  </tbody>
</table>
</div><p>Given our aim of providing practical help to the user to plan a touristic trip in Lyon, we think the public transport part is important to show. We only focused on the metro as it is the easiest to use and the most popular among all means of public transport.</p><h3 id="About-bikes-in-Lyon" style=""><a class="anchor hidden-xs" href="#About-bikes-in-Lyon" title="About-bikes-in-Lyon"><span class="octicon octicon-link"></span></a>About bikes in Lyon</h3><p>Another mean of transport that can be interesting for the user - escpecially if they come to Lyon during the summer - is biking. There are some shared bikes in Lyon that you can take from (and put back to) a station. The thing is, those stations have limited bike capacity. Two different indicators are important to know:</p><ul>
<li>the number of available bikes at a station</li>
<li>the number of available bike stands at a station - you can’t just leave your bike in the surroundings, it has to be plugged in to a stand</li>
</ul><p>Those numbers vary from a station to another and from time to time.<br>
The data is available in real time via the API of <a href="http://JCDecaux.com" target="_blank">JCDecaux.com</a>. The thing is, we wanted to get some data for all times in the day, not only at a specific hour. That’s why we wrote a short script to send a get request to the API every 30 minutes, and it ran for almost 3 days. We then took the mean of the 2 or 3 values we had for each situation.</p><pre><code class="python hljs"><span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">import</span> time

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">scrap</span><span class="hljs-params">(N)</span>:</span>
    i = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(N):
        name = datetime.datetime.now().strftime(<span class="hljs-string">"%Y%m%d%H%M%S"</span>)
        name = name + <span class="hljs-string">".json"</span>
        d = requests.get(<span class="hljs-string">'https://api.jcdecaux.com/vls/v1/stations?contract=Lyon&amp;apiKey=120d82ecfbbcb551fa2aebb8bb8094eb54a63b9b'</span>)

        <span class="hljs-keyword">with</span> open(name , <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> outfile:
            json.dump(d.json(), outfile)
        time.sleep(<span class="hljs-number">1800</span>)

<span class="hljs-comment">#scrap(200)             # don't run this if you don't have 3 days to lose ! </span>
</code></pre><p>After gathering all this data and aggregating them, we ended up with two tables:</p><ul>
<li>one with hourly data for each station</li>
<li>one with the basic information about the stations</li>
</ul><pre><code class="python hljs">data_bike_station = json.load(open(<span class="hljs-string">'station_data.json'</span>,encoding=<span class="hljs-string">'utf8'</span>))
data_bike_station = pd.DataFrame(data_bike_station)
data_bike_station = data_bike_station.transpose()
data_bike_station.head()
</code></pre><div>
<style>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre class="part" data-startline="609" data-endline="615"><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table class="dataframe" border="1">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>address</th>
      <th>name</th>
      <th>position</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>10001</th>
      <td>rue de la Technologie</td>
      <td>10001 - IUT / FEYSSINE</td>
      <td>{'lat': 45.785632, 'lng': 4.882366}</td>
    </tr>
    <tr>
      <th>10002</th>
      <td>Avenue Albert Einstein au niveau du virage</td>
      <td>10002 - INSA (FAR)</td>
      <td>{'lat': 45.782222, 'lng': 4.876951}</td>
    </tr>
    <tr>
      <th>10004</th>
      <td>Rue Salvador Allende / Angle promenade du Lys</td>
      <td>10004 - TONKIN</td>
      <td>{'lat': 45.776217, 'lng': 4.862636}</td>
    </tr>
    <tr>
      <th>10005</th>
      <td>Face Entrée du Parc de la Tête d'Or</td>
      <td>10005 - BOULEVARD DU 11 NOVEMBRE</td>
      <td>{'lat': 45.779702, 'lng': 4.860029}</td>
    </tr>
    <tr>
      <th>10006</th>
      <td>Place Charles Hernu / côté sud</td>
      <td>10006 - CHARPENNES (FAR)</td>
      <td>{'lat': 45.770224999999996, 'lng': 4.863102}</td>
    </tr>
  </tbody>
</table>
</div><p>The index of the previous dataframe is the id of the station. It is used to link the dataset to the one of the hourly data below.</p><pre><code class="python hljs">data_bike_hourly = json.load(open(<span class="hljs-string">'hourly_data.json'</span>,encoding=<span class="hljs-string">'utf8'</span>))
data_bike_hourly = pd.DataFrame(data_bike_hourly)
D = data_bike_hourly.to_dict(orient=<span class="hljs-string">'index'</span>)
dict(list(D[<span class="hljs-number">0</span>].items())[<span class="hljs-number">0</span>:<span class="hljs-number">5</span>])


</code></pre><pre><code>{'10102': {'available_bike_stands': 21.0,
  'available_bikes': 9.0,
  'time': 1.25},
 '6028': {'available_bike_stands': 9.0, 'available_bikes': 7.0, 'time': 0.25},
 '7057': {'available_bike_stands': 8.0,
  'available_bikes': 16.0,
  'time': 22.25},
 '8037': {'available_bike_stands': 2.3333333333333335,
  'available_bikes': 16.666666666666668,
  'time': 12.75},
 '9033': {'available_bike_stands': 37.333333333333336,
  'available_bikes': 2.6666666666666665,
  'time': 15.75}}
</code></pre><h2 id="3-Genre" style=""><a class="anchor hidden-xs" href="#3-Genre" title="3-Genre"><span class="octicon octicon-link"></span></a>3.    Genre</h2><ul>
<li>
<p>For the Visual narrative, here are the tools we have used from each category:</p>
<ul>
<li>
<p><em>Visual Structuring:</em></p>
<ul>
<li>A consistent Visual Platform <em>Tell me Lyon</em>: each slide is provided with a legend, a description of the places when hovering them, and a data exploration part where you need to choose your options</li>
<li>A time bar in the shared-bikes slide to let you know the available bikes and stands every hours of the day</li>
</ul>
</li>
<li>
<p><em>Highlighting:</em></p>
<ul>
<li>Close-Ups</li>
<li>Feature Distinction</li>
<li>Motion</li>
<li>Zooming</li>
</ul>
</li>
<li>
<p><em>Transition Guidance:</em></p>
<ul>
<li>Animated Transitions, especially in the description part of the shared-bikes slide when you hover different bike stations</li>
</ul>
</li>
</ul>
</li>
<li>
<p>For the Narrative Structure, here are the tools we have used from each category:</p>
<ul>
<li>
<p><em>Ordering:</em></p>
<ul>
<li>Even though the order of the slides has been chosen on purpose, there is no clear path for the users to take through our visualization. Our visualization’s ordering is then random access.</li>
</ul>
</li>
<li>
<p><em>Interactivity:</em></p>
<ul>
<li>Hover Highlighting / Details</li>
<li>Filtering / Selection / Search</li>
<li>Navigation Buttons</li>
</ul>
</li>
<li>
<p><em>Messaging: Captions / Headlines</em></p>
<ul>
<li>Captions / Headlines</li>
<li>Multi-Messaging</li>
<li>Accompanying Article: for each place there is the website provided in order to book an accommodation or get more information about a specific monument for instance</li>
</ul>
</li>
</ul>
</li>
</ul><h2 id="4-Visualizations" style=""><a class="anchor hidden-xs" href="#4-Visualizations" title="4-Visualizations"><span class="octicon octicon-link"></span></a>4.    Visualizations</h2><p>We have chosen to use a map slideshow to help you travel and discover several interesting aspects about Lyon. In fact, it is easy to access the information you need and you can go back and forth in a easier way than in a video for example, which has to be quite linear. Each slide contains a lot of other genres of visualization such as annotated maps, bar charts and even animations.</p><p>From the slide-show menu, you can access our set of interactive maps : <em>Hot spots</em>, <em>Shared-bikes</em>, <em>Hotels</em> and <em>Transports</em>. We think that it is the best way to build an interaction with the user. In each slide you can choose to display what you’re interested in.</p><p>The best thing to do is to start with the slide <em>Hot spots</em>. You can visualize all the interesting places in Lyon along with their popularity - see the number besides the star in the tooltip, which is the popularity ranking of the hotspot. You can choose to display only the trendy places, and select categories, if you are for instance interested in cathedrals. You are also able to use the search bar if you are looking for a place in particular. This is the slide where you want to choose the most trendy places in which you will discover the amazing French culture. You can find a complete description of every places by hovering them. There is also a link to the website if you want to book tickets or get some more information.</p><p>The most interesting thing about this slide is that you can select all places you absolutely do not want to miss during your trip. These selections will appear in your wish list and will be saved in all the slides so that we can recommand you, according to your selection, a place to sleep and the metro stations that you want to use.</p><p>If you go then in the <em>Hotels</em> slide, you will be able to see all the accommodations available, sorted by three categories : <em>private accommodation</em>, <em>hotel</em> and <em>hostel</em>. You can select the maximum radius you want to live from the places of your whishlist. Other selections can be made on overall quality and customer satisfaction. In this slide, we guide you to choose the best accommodation adapted to your trip and your requirements.</p><p>In the slide <em>Transports</em>, we guide you to the closest stations from your wished places. You can select the metro lines you are interested in and we give you the closest stations.</p><p>Finally, the slide <em>Shared-bikes</em>, because we know we are aiming mostly at Danish people, is a way for you to know the available bikes and stands in the different bike stations every hours of the day. There is an animation which gives you a general overview of the popularity of some stations in Lyon based on different colors. This gives as well a picture of the human flows throughout the day within the city.</p><p>The global structure of the visualization is based on AngularJS 1.6 (<a href="https://angularjs.org/" target="_blank">https://angularjs.org/</a>). The map has been created using Leaflet 1.3.0 (<a href="https://leafletjs.com/" target="_blank">https://leafletjs.com/</a>). Most of the components were built with Semantic UI 2.3 (<a href="https://semantic-ui.com/" target="_blank">https://semantic-ui.com/</a>) and jQuery 3.3.1 (<a href="https://jquery.com/" target="_blank">https://jquery.com/</a>); and the slideshow structure with Angular-Slider (<a href="https://github.com/ventu" target="_blank">https://github.com/ventu</a> ocket/angular-slider). As expected, D3 5.4 (<a href="https://d3js.org/" target="_blank">https://d3js.org/</a>) was used for the maps, graphs, markers etc. Finally we used Node.js in order to get more data (photos, rating, review).</p><p>There are two ways of using our visualization. First, the viewer can just create his wish list and go through the acommodations, bikes and metros in order to prepare his trip in a simple way. The other possibility is to deeply dig into the numerous data that are displayed and better understand the characteristics of the city through the visualizations. For instance one can notice that there are more cheap hotels with good ratings than hotels with many stars and bad customer satistaction. Another example is the shared-bike slide animation, which really tells the story of bike users movement throughout the day.<br>
Note: as we say in French, <em>qui cherche trouve</em>…!</p><h2 id="5-Discussion" style=""><a class="anchor hidden-xs" href="#5-Discussion" title="5-Discussion"><span class="octicon octicon-link"></span></a>5.    Discussion</h2><h3 id="What-went-well" style=""><a class="anchor hidden-xs" href="#What-went-well" title="What-went-well"><span class="octicon octicon-link"></span></a>What went well?</h3><p>We have succeeded in giving a good overview of the interesting places in Lyon, finding a good popularity metric (we tried several of them which were not relevant before finding the right one.)</p><p>We wanted to create a visualization that was as interactive as possible, and we think the result is very good in that perspective. Furthermore, it is pleasant to use as there is consistency in the colors and the shapes of the different slides.</p><p>More than a story, it was also important for us to give the user the history behind the visualizations we proposed through “Tell Me Lyon”. Indeed, it seemed important to us that the user not only see coloured markers on a map, but be aware of the reality of the objects we were talking about and their past histories.</p><h3 id="What-is-still-missing-What-could-be-improved-Why" style=""><a class="anchor hidden-xs" href="#What-is-still-missing-What-could-be-improved-Why" title="What-is-still-missing-What-could-be-improved-Why"><span class="octicon octicon-link"></span></a>What is still missing? What could be improved? Why?</h3><p>When we did the video we were planning to include more slides, such as one with the bad city aspects (pollution, noise etc), as well as one dedicated to the famous annual light show in the whole city. We dropped those parts of the project due to some difficulties to get relevant data sets; and to focus more on the ones we had in order to develop the storytelling.</p><h2 id="6-Contributions" style=""><a class="anchor hidden-xs" href="#6-Contributions" title="6-Contributions"><span class="octicon octicon-link"></span></a>6.    Contributions</h2><ul>
<li>
<p>Emma and Emilie focused more on gathering all the data and preprocessing it (hotpsots and hotels for Emma, bikes and transports for Emilie).</p>
</li>
<li>
<p>Benjamin took the lead on the code and actually building the visualization. He also worked to enhance datasets with others, in particular, hotspots dataset with Google Maps Places data.</p>
</li>
<li>
<p>The structure of the user interface in the different slides were tought and built together.</p>
</li>
<li>
<p>Emma and Emilie were responsible of this explainer page.</p>
</li>
</ul></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav"><li class=""><a href="#Tell-me-Lyon---Explainer-notebook" title="Tell me Lyon - Explainer notebook">Tell me Lyon - Explainer notebook</a><ul class="nav"><li class=""><a href="#1-Motivation" title="1.    Motivation">1.    Motivation</a></li><li class=""><a href="#2-Basic-stats" title="2.    Basic stats">2.    Basic stats</a><ul class="nav"><li class=""><a href="#About-accommodations-in-Lyon" title="About accommodations in Lyon">About accommodations in Lyon</a></li><li><a href="#About-hotspots" title="About hotspots">About hotspots</a></li><li><a href="#About-metros-in-Lyon" title="About metros in Lyon">About metros in Lyon</a></li><li class=""><a href="#About-bikes-in-Lyon" title="About bikes in Lyon">About bikes in Lyon</a></li></ul></li><li class=""><a href="#3-Genre" title="3.    Genre">3.    Genre</a></li><li class=""><a href="#4-Visualizations" title="4.    Visualizations">4.    Visualizations</a></li><li class=""><a href="#5-Discussion" title="5.    Discussion">5.    Discussion</a><ul class="nav"><li class=""><a href="#What-went-well" title="What went well?">What went well?</a></li><li><a href="#What-is-still-missing-What-could-be-improved-Why" title="What is still missing? What could be improved? Why?">What is still missing? What could be improved? Why?</a></li></ul></li><li class=""><a href="#6-Contributions" title="6.    Contributions">6.    Contributions</a></li></ul></li></ul></div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;"  >
        <div class="toc"><ul class="nav"><li class=""><a href="#Tell-me-Lyon---Explainer-notebook" title="Tell me Lyon - Explainer notebook">Tell me Lyon - Explainer notebook</a><ul class="nav"><li class=""><a href="#1-Motivation" title="1.    Motivation">1.    Motivation</a></li><li class=""><a href="#2-Basic-stats" title="2.    Basic stats">2.    Basic stats</a><ul class="nav"><li class=""><a href="#About-accommodations-in-Lyon" title="About accommodations in Lyon">About accommodations in Lyon</a></li><li><a href="#About-hotspots" title="About hotspots">About hotspots</a></li><li><a href="#About-metros-in-Lyon" title="About metros in Lyon">About metros in Lyon</a></li><li class=""><a href="#About-bikes-in-Lyon" title="About bikes in Lyon">About bikes in Lyon</a></li></ul></li><li class=""><a href="#3-Genre" title="3.    Genre">3.    Genre</a></li><li class=""><a href="#4-Visualizations" title="4.    Visualizations">4.    Visualizations</a></li><li class=""><a href="#5-Discussion" title="5.    Discussion">5.    Discussion</a><ul class="nav"><li class=""><a href="#What-went-well" title="What went well?">What went well?</a></li><li><a href="#What-is-still-missing-What-could-be-improved-Why" title="What is still missing? What could be improved? Why?">What is still missing? What could be improved? Why?</a></li></ul></li><li class=""><a href="#6-Contributions" title="6.    Contributions">6.    Contributions</a></li></ul></li></ul></div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
